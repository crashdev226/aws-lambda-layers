version: '3.7'

services:
  # We don't need to start these services. It is used to create intermediate
  # images used to install PHP and extensions.
  php81-base:
    image: bref/${ARCHITECTURE}-php81-base
    build:
      context: ..
      dockerfile: runtime/docker/${ARCHITECTURE}-php81-base.Dockerfile

  php81-ext-mbstring:
    image: bref/${ARCHITECTURE}-php81-ext-mbstring
    build:
      context: ..
      dockerfile: runtime/docker/ext-${ARCHITECTURE}/mbstring.Dockerfile
      args:
        - PHP_VERSION=php81

  php81-ext-bcmath:
    image: bref/${ARCHITECTURE}-php81-ext-bcmath
    build:
      context: ..
      dockerfile: runtime/docker/ext-${ARCHITECTURE}/ext.Dockerfile
      args:
        - PHP_VERSION=php81
        - EXTENSION=bcmath

  php81-ext-ctype:
    image: bref/${ARCHITECTURE}-php81-ext-ctype
    build:
      context: ..
      dockerfile: runtime/docker/ext-${ARCHITECTURE}/ext.Dockerfile
      args:
        - PHP_VERSION=php81
        - EXTENSION=ctype

  php81-ext-dom:
    image: bref/${ARCHITECTURE}-php81-ext-dom
    build:
      context: ..
      dockerfile: runtime/docker/ext-${ARCHITECTURE}/ext.Dockerfile
      args:
        - PHP_VERSION=php81
        - EXTENSION=dom

  php81-ext-exif:
    image: bref/${ARCHITECTURE}-php81-ext-exif
    build:
      context: ..
      dockerfile: runtime/docker/ext-${ARCHITECTURE}/ext.Dockerfile
      args:
        - PHP_VERSION=php81
        - EXTENSION=exif

  php81-ext-fileinfo:
    image: bref/${ARCHITECTURE}-php81-ext-fileinfo
    build:
      context: ..
      dockerfile: runtime/docker/ext-${ARCHITECTURE}/ext.Dockerfile
      args:
        - PHP_VERSION=php81
        - EXTENSION=fileinfo

  php81-ext-ftp:
    image: bref/${ARCHITECTURE}-php81-ext-ftp
    build:
      context: ..
      dockerfile: runtime/docker/ext-${ARCHITECTURE}/ext.Dockerfile
      args:
        - PHP_VERSION=php81
        - EXTENSION=ftp

  php81-ext-gettext:
    image: bref/${ARCHITECTURE}-php81-ext-gettext
    build:
      context: ..
      dockerfile: runtime/docker/ext-${ARCHITECTURE}/ext.Dockerfile
      args:
        - PHP_VERSION=php81
        - EXTENSION=gettext

  php81-ext-iconv:
    image: bref/${ARCHITECTURE}-php81-ext-iconv
    build:
      context: ..
      dockerfile: runtime/docker/ext-${ARCHITECTURE}/ext.Dockerfile
      args:
        - PHP_VERSION=php81
        - EXTENSION=iconv

  php81-ext-mysqli:
    image: bref/${ARCHITECTURE}-php81-ext-mysqli
    build:
      context: ..
      dockerfile: runtime/docker/ext-${ARCHITECTURE}/mysqli.Dockerfile
      args:
        - PHP_VERSION=php81

  php81-ext-opcache:
    image: bref/${ARCHITECTURE}-php81-ext-opcache
    build:
      context: ..
      dockerfile: runtime/docker/ext-${ARCHITECTURE}/ext.Dockerfile
      args:
        - PHP_VERSION=php81
        - EXTENSION=opcache

  php81-ext-phar:
    image: bref/${ARCHITECTURE}-php81-ext-phar
    build:
      context: ..
      dockerfile: runtime/docker/ext-${ARCHITECTURE}/ext.Dockerfile
      args:
        - PHP_VERSION=php81
        - EXTENSION=phar
